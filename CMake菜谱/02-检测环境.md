# 检测环境

尽管`CMake`是跨平台的，但是有时源代码并不是完全可移植的，比如移植性差一直是`C++`被人所诟病的一点。因此在编译源代码的时候，我们需要事先根据平台、操作系统和编译器对项目进行不同的配置。

### 1. 检测操作系统

```cmake
cmake_minimum_required(VERSION 3.5 FATAL_ERROR)
project(recipe-01 LANGUAGES CXX)

if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
	message(STATUS "Configuring on/for Linux")
elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
	message(STATUS "Configuring on/for Windows")
else()
	message(STATUS "Configuring on/for ${CMAKE_SYSTEM_NAME}")
endif()
```

`cmake`定义了`CMAKE_SYSTEM_NAME`中保存了当前操作系统的名称，因此无需使用命令、工具或脚本来查询此信息。

`STREQUAL`可以在`if`条件判断语句中判断两个字符串是否相等。

```cmake
if()
	...
elseif()
 	...
elseif()
	...
else()
	...
endif()
```

上面的逻辑判断语句和`C++`中的类似。